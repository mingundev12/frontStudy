<!-- 상품상세.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상품상세</title>
    <style>
        #wrap {
            display: flex;
            gap: 20px;
        }
        img {width: 100%;}
        .left {
            width: 300px;
            padding: 20px;
            position: relative;
        }
        .slideBox { 
            position: relative;
            overflow: hidden;
            height: 300px;
        }
        .slide {
            /* ul 태그 */
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            position: relative;
        }
        .slideItem {
            /* li 태그 */
            width: 300px;
            /* display: none; */
            position: absolute;
            opacity: 0;
            transition: opacity 0.5s;
        }
        .slideItem.active {
            opacity: 1;
        }
    </style>
</head>
<body>

    <div id="wrap">
        <div class="left">
            <div class="slideBox">
                <ul class="slide">
                    <li class="slideItem active">
                        <img src="" alt="" class="item">
                    </li>
                    <li class="slideItem">
                        <img src="" alt="" class="item">
                    </li>
                    <li class="slideItem">
                        <img src="" alt="" class="item">
                    </li>
                </ul>
            </div>
        </div>
        <div class="right">
            <h3>아디다스 신발 런닝화 재입고!</h3>
            <p>가격: 35,000</p>
            <div class="">
                <select id="size">
                    <option value="260">260</option>
                    <option value="270">270</option>
                    <option value="280">280</option>
                    <option value="290">290</option>
                </select>
            </div>
            <div class="">
                <input type="hidden" id="price" value="35000">
                수량 : <input type="number" id="amount" min="1" max="10" value="1">
            </div>
            <button id="cart">장바구니</button>
            <button id="buy">구매</button>
        </div>
    </div>
</body>
</html>

<script>
// 장바구니 주소
    const cartURL = "http://dwstd.ipdisk.co.kr/dataview/test.php";

    // 장바구니 버튼 클릭하면 장바구니에 저장될 수 있게
    // 현재 선택한 값들을 서버에 전달하기

    document.querySelector("#cart").addEventListener('click', cartSave);

    async function cartSave() {
        let price = document.getElementById("price").value;
        let amount = document.getElementById("amount").value;
        let size = document.getElementById("size").value;

        let data = {
            itemPrice : price,
            itemAmount : amount,
            itemSize : size
        };

        let jsonData = JSON.stringify(data);

        const response = await fetch(cartURL, {
            method : "POST",
            headers : {"Content-Type" : "application/json"},
            body : jsonData
        });

        const result = await response.json();

        if (result.ok) {
            let isMove = confirm("장바구니에 담았습니다. 이동하시겠습니까?");
            if(isMove) location.href="장바구니 웹 주소";
        } else {
            alert("장바구니 담기 실패 !");
        }
    }

    const imgList = ["1.jpg", "2.jpg", "3.jpg"];

    const item = document.getElementsByClassName("item");
    for(var i in imgList) {
        item[i].src = "./" + imgList[i];
    }

    let slides = document.querySelectorAll(".slideItem");
    let index = 0;
    setInterval(function() {
        slides[index].classList.remove("active");
        index = (index + 1) % slides.length;
        slides[index].classList.add("active");
    }, 3000);

    // 이미지를 3초에 한번씩 이동시켜서 보이게 하기
    // 시간을 다루는 함수 : setTimeout, setInterval
    // setTimeout : 지정한 시간 이후에 한번만 실행
    // setInterval : 지정한 시간 간격으로 실행
    // setInterval(함수(실행내용), 시간(ms));

</script>